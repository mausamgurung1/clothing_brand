{% extends 'admin_layout.html' %}
{% load static %}

{% block title %}Product List{% endblock %}


{% block body %}

    

<div class="page-body-wrapper">
 
    <!-- Order section Start -->
    <div class="page-body">
        <div class="title-header">
            <h5>Product List</h5>
        </div>

        <!-- Table Start -->
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div>
                                <div class="table-responsive table-desi">
                                    <table class="table table-striped all-package">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Product Name</th>
                                                <th>Category</th>
                                                <th>Price (₹)</th>
                                                <th>Total Stock</th>
                                                <th>Low Stock</th>
                                                <th>Out of Stock</th>
                                                <th>Created Date</th>
                                                <th>Actions</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                            {% for item in products %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>
                                                    <strong>{{ item.product.name }}</strong>
                                                    {% if item.subproducts %}
                                                    <br><small class="text-muted">{{ item.subproducts.count }} variant(s)</small>
                                                    {% endif %}
                                                </td>
                                                <td>{{ item.product.category }}</td>
                                                <td>₹{{ item.product.price }}</td>
                                                <td>
                                                    {% if item.total_stock > 0 %}
                                                        <span class="badge bg-success">{{ item.total_stock }}</span>
                                                    {% else %}
                                                        <span class="badge bg-danger">0</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if item.low_stock_count > 0 %}
                                                        <span class="badge bg-warning text-dark">{{ item.low_stock_count }} variant(s)</span>
                                                    {% else %}
                                                        <span class="badge bg-secondary">0</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if item.out_of_stock_count > 0 %}
                                                        <span class="badge bg-danger">{{ item.out_of_stock_count }} variant(s)</span>
                                                    {% else %}
                                                        <span class="badge bg-success">0</span>
                                                    {% endif %}
                                                </td>
                                                <td>{{ item.product.created_at|date:"M d, Y" }}</td>
                                                <td>
                                                    <ul>
                                                        <li>
                                                            <a href="{% url 'allproduct' %}" title="View SubProducts">
                                                                <span class="lnr lnr-eye"></span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="{% url 'allproduct' %}" title="Edit Product">
                                                                <span class="lnr lnr-pencil"></span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="{% url "remove_products" item.product.id %}" onclick="return confirm('Are you sure you want to delete this product?')" title="Delete Product">
                                                                <i class="far fa-trash-alt theme-color"></i>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                       
                        <!-- Pagination Box End -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Table End -->

       
    </div>
    <!-- Order section End -->
</div>




{% endblock %}